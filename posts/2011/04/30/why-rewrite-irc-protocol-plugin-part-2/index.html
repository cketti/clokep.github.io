<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Why rewrite the IRC protocol plugin? (Part 2)</title>
    <link rel="stylesheet" href="http://patrick.cloke.us/theme/css/main.css" />
    <link href="http://patrick.cloke.us/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Like bricks in the sky Atom Feed" />
    <link href="http://patrick.cloke.us/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Like bricks in the sky RSS Feed" />

    <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body id="index" class="home">
    <header id="banner" class="body">
        <h1><a href="http://patrick.cloke.us/">Like bricks in the sky </a></h1>
        <nav><ul>
            <li><a href="http://patrick.cloke.us/pages/about.html">About</a></li>
            <li><a href="http://patrick.cloke.us/pages/contact.html">Contact</a></li>
            <li><a href="http://patrick.cloke.us/archives.html">Archives</a></li>
            <li><a href="http://patrick.cloke.us/tags.html">Tags</a></li>
        </ul></nav>
    </header><!-- /#banner -->

    <div id="container" class="body">
        <section id="extras" class="left">
            <div class="social">
                <h2>social</h2>
                <ul>
                    <li><a href="http://patrick.cloke.us/feeds/atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                    <li><a href="http://patrick.cloke.us/feeds/rss.xml" type="application/rss+xml" rel="alternate">rss feed</a></li>

                    <li><a href="https://www.twitter.com/clokep">twitter</a></li>
                    <li><a href="https://bitbucket.org/clokep">bitbucket</a></li>
                    <li><a href="https://www.github.com/clokep">github</a></li>
                    <li><a href="https://mozillians.org/u/clokep/">mozillians</a></li>
                </ul>
            </div><!-- /.social -->
        </section><!-- /#extras -->

        <section id="search" class="left">
            <h2>search</h2>

            <form method="get" action="http://www.bing.com/search">

                <input type="text" name="q" placeholder="search this site" />
                <input type="submit" value="Search" />
                <input type="hidden"  name="q1" value="site:patrick.cloke.us" />
            </form>
        </section>



<section id="content" class="body">
  <article>
    <header>
        <h1 class="entry-title">
            <a href="http://patrick.cloke.us/posts/2011/04/30/why-rewrite-irc-protocol-plugin-part-2/" rel="bookmark"
               title="Permalink to Why rewrite the IRC protocol plugin? (Part 2)">Why rewrite the <span class="caps">IRC</span> protocol plugin? (Part&nbsp;2)</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
    <abbr class="published" title="2011-04-30T13:01:00">
        Published: 04/30/2011 01:01 PM EST
    </abbr>

    <address class="vcard author">
        By             <a class="url fn" href="http://patrick.cloke.us/author/patrick-cloke.html">Patrick Cloke</a>
    </address>

<p>tags: <a href="http://patrick.cloke.us/tag/instantbird.html">Instantbird</a> <a href="http://patrick.cloke.us/tag/irc.html">IRC</a> </p>
</footer><!-- /.post-info -->        <p>I <a class="reference external" href="http://patrick.cloke.us/posts/2010/12/08/why-rewrite-irc-into-javascript/">previously wrote about</a> why I&#8217;m rewriting the libpurple <span class="caps">IRC</span>
implementation into a JavaScript implementation for Instantbird.&nbsp; This
is kind of a follow up, but more focused on what I hope to accomplish
feature wise for <span class="caps">IRC</span> in Instantbird.&nbsp; A good overview to look at is the
<a class="reference external" href="https://bugzilla.instantbird.org/showdependencygraph.cgi?id=507&amp;display=web&amp;rankdir=LR">dependencies of bug 507</a> (implement <span class="caps">IRC</span> in JavaScript) &#8212; you&#8217;ll want
to look to the left of bug 507, these are the bugs that depend on 507
(as opposed to blocking&nbsp;507).</p>
<p>My overall hope is to make Instantbird the easiest and simplest <span class="caps">IRC</span>
client to use.&nbsp; I&#8217;ve found that most <span class="caps">IRC</span> clients tend to depend a great
deal on commands and essentially being a very thin <span class="caps">GUI</span> layer on top of
the protocol.&nbsp; I don&#8217;t really see the reason for this, we should attempt
to hide the protocol as much as possible from the users.&nbsp; This means
fitting the <span class="caps">IRC</span> command responses into the <span class="caps">GUI</span> wherever possible and
possibly &quot;losing&quot; some features compared to other <span class="caps">IRC</span> clients, although
I think that&#8217;s a matter of perspective.&nbsp; (For example, there&#8217;s often an
<span class="caps">IRC</span> command to list all the channels available, I <em>do not</em> think this
should be implemented as a text command, but it should be available via
the join chat <span class="caps">GUI</span>).</p>
<p>Now some more specific&nbsp;plans:</p>
<ul class="simple">
<li>Support for <span class="caps">IRC</span> services would be pretty awesome, I&#8217;m not sure
whether this would be part of the main protocol or as an extension,
but it should be able to handle NickServ mostly autonomously
(possibly even automatically registering the nick, etc.).&nbsp; MemoServ
could be implemented as a message service once there is <span class="caps">UI</span> for that
in Instantbird.&nbsp; I&#8217;m not sure how ChanServ could be handled in the
<span class="caps">UI</span>, but I&#8217;ll think more about this.&nbsp; See <a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=720">bug 720</a> for more info.
(And yes, there are multiple versions of <span class="caps">IRC</span> services, but we can
attempt to support a subset and otherwise just leave it up to the
user.&nbsp; Ideally servers would have supported this stuff&#8230;but that&#8217;s
not how <span class="caps">IRC</span>&nbsp;works.)</li>
<li>The <span class="caps">UI</span> should be more responsive to the modes of the user and to the
channel.&nbsp; For example, if the user does not have permission to edit
the topic, it should not be editable in the <span class="caps">UI</span> (<a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=318">bug 318</a>).&nbsp; Also,
if a user is a (half-)operator, there should be <span class="caps">UI</span> to have cause
other users to be given (h)op (<a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=597">bug 597</a>).&nbsp; In terms of channel
modes, there could be <span class="caps">UI</span> to show the channel is invite only or that
it&#8217;s a hidden&nbsp;channel.</li>
</ul>
<p>There&#8217;s some not as user visible improvements I&#8217;d like to&nbsp;make:</p>
<ul class="simple">
<li>Supporting more authentication methods in <span class="caps">IRC</span> (<a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=719">bug 719</a>).</li>
</ul>
<p>There&#8217;s also a few &quot;bugs&quot; in the libpurple implementation that this
will&nbsp;fix:</p>
<ul class="simple">
<li>The /msg command doesn&#8217;t show outgoing messages (<a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=188">bug 188</a>).&nbsp; I
believe this is actually already&nbsp;fixed.</li>
<li><span class="caps">IRC</span> channels should automatically rejoin on reconnect (<a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=385">bug 385</a>).</li>
<li>Chats with other users should show whether they are available or not
(<a class="reference external" href="https://bugzilla.instantbird.org/show_bug.cgi?id=613">bug 613</a>).</li>
</ul>
<p>These are just some ideas and it&#8217;s a long ways off for feature parity
with libpurple even.&nbsp; (Although since Instantbird doesn&#8217;t support all
the features of Pidgin, feature-parity in this case doesn&#8217;t include
things like <span class="caps">DCC</span> transfer, etc. until Instantbird itself supports&nbsp;those.)</p>
<p>Right now, the code is mostly usable (and I&#8217;m finally catching any
exceptions that are thrown so the code shouldn&#8217;t crash anymore), and
works fine.&nbsp; The one issue I&#8217;m having is sometimes I&#8217;m unable to
reconnect when the connection is lost, but I think I&#8217;ve finally fixed
that issue and reconnection should happen&nbsp;automatically!</p>
<p>One last quick note, if you happen to have the <a class="reference external" href="https://hg.instantbird.org/experiments">repository</a> checked
out, you&#8217;ll want to update on the default branch from now on as I&#8217;ve
merged the separate branches together under&nbsp;subfolders.</p>

    </div><!-- /.entry-content -->

    <div class="comments">
        <h2>Comments !</h2>
        <a href="http://foo.com/bar.html#disqus_thread">Link</a>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = 'clokep';
            var disqus_identifier = 'posts/2011/04/30/why-rewrite-irc-protocol-plugin-part-2/';
            var disqus_url = 'http://patrick.cloke.us/posts/2011/04/30/why-rewrite-irc-protocol-plugin-part-2/';
            (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//clokep.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the comments.</noscript>
    </div>

  </article>
</section>
    </div>

    <footer id="contentinfo" class="body">
        <address id="about" class="vcard body">
        Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
        </address><!-- /#about -->
    </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-52389517-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'clokep';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>